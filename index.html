<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHAOS SIMULATOR</title>

<style>
    body {
        background: black;
        color: #00ff00;
        font-family: "Courier New", monospace;
        margin: 0;
        overflow: hidden;
    }

    #panel {
        background: rgba(0,0,0,0.8);
        border-bottom: 2px solid #00ff00;
        padding: 10px;
        display: flex;
        gap: 10px;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 9999;
    }

    button {
        background: black;
        border: 1px solid #00ff00;
        color: #00ff00;
        padding: 6px 10px;
        cursor: pointer;
        font-family: inherit;
    }

    button:hover {
        background: #003300;
    }

    /* Matrix Rain */
    #matrixCanvas {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        display: none;
        z-index: 2;
        opacity: 0.5;
    }

    /* Retro Popups */
    .popup {
        position: fixed;
        background: #222;
        border: 2px solid #00ff00;
        padding: 10px;
        color: #00ff00;
        font-size: 14px;
        z-index: 5000;
        animation: popupBounce 3s infinite alternate;
    }

    @keyframes popupBounce {
        0% { transform: translate(0,0); }
        100% { transform: translate(20px,10px); }
    }

    /* Terminal Spam */
    #terminal {
        position: fixed;
        bottom: 0;
        width: 100%;
        height: 200px;
        background: rgba(0,0,0,0.85);
        color: #00ff00;
        overflow-y: auto;
        padding: 10px;
        border-top: 2px solid #00ff00;
        display: none;
        z-index: 6000;
    }

    /* Glitch Overlay */
    #glitchOverlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        display: none;
        background: repeating-linear-gradient(
            transparent,
            rgba(0,255,0,0.1) 2px,
            transparent 4px
        );
        mix-blend-mode: screen;
        animation: glitchMove 0.1s infinite;
        z-index: 3000;
    }

    @keyframes glitchMove {
        0% { transform: translate(0,0); }
        50% { transform: translate(-2px,1px); }
        100% { transform: translate(2px,-1px); }
    }

    /* Sci-fi parasite ascii */
    #parasite {
        position: fixed;
        top: 20%;
        left: 30%;
        font-size: 40px;
        color: #00ff99;
        opacity: 0;
        z-index: 7000;
        transition: 1s;
        text-shadow: 0 0 10px #00ffaa;
    }

    /* Blue Screen Flash */
    #bsodFlash {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: #0000aa;
        color: white;
        font-size: 30px;
        padding: 20px;
        display: none;
        z-index: 9000;
    }

</style>
</head>
<body>

<!-- CONTROL PANEL -->
<div id="panel">
    <button onclick="startMatrix()">Matrix Rain</button>
    <button onclick="spawnPopup()">Retro Popups</button>
    <button onclick="startTerminal()">Hacker Spam</button>
    <button onclick="toggleGlitch()">Glitch Overlay</button>
    <button onclick="spawnParasite()">Sci‑Fi Parasite</button>
    <button onclick="screenShake()">Screen Shake</button>
    <button onclick="bsod()">Blue Flash</button>
    <button onclick="finalCollapse()">FINAL COLLAPSE</button>
</div>

<!-- Effects -->
<canvas id="matrixCanvas"></canvas>
<div id="glitchOverlay"></div>
<div id="terminal"></div>
<div id="parasite">▒▓█▒▓█▒▓█▒</div>
<div id="bsodFlash">SYSTEM HALTED</div>

<script>

/* -----------------------------------------
   MATRIX RAIN
------------------------------------------ */
let matrixActive = false;

function startMatrix() {
    const canvas = document.getElementById("matrixCanvas");
    const ctx = canvas.getContext("2d");

    canvas.style.display = "block";
    matrixActive = true;

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const symbols = "アカサタナハマヤラワ0123456789";
    const columns = canvas.width / 15;
    const drops = [];

    for (let i = 0; i < columns; i++) drops[i] = 1;

    function draw() {
        if (!matrixActive) return;
        ctx.fillStyle = "rgba(0,0,0,0.05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#00ff00";

        for (let i = 0; i < drops.length; i++) {
            const text = symbols[Math.floor(Math.random() * symbols.length)];
            ctx.fillText(text, i * 15, drops[i] * 15);

            if (drops[i] * 15 > canvas.height) drops[i] = 0;
            drops[i]++;
        }
        requestAnimationFrame(draw);
    }
    draw();
}

/* -----------------------------------------
   RETRO POPUPS
------------------------------------------ */
function spawnPopup() {
    const box = document.createElement("div");
    box.className = "popup";
    box.style.left = Math.random() * (window.innerWidth - 200) + "px";
    box.style.top = Math.random() * (window.innerHeight - 150) + "px";
    box.innerHTML = "ERROR:<br>Unexpected Behavior Detected<br>[OK]";
    document.body.appendChild(box);
}

/* -----------------------------------------
   TERMINAL SPAM
------------------------------------------ */
let terminalActive = false;

function startTerminal() {
    const term = document.getElementById("terminal");
    term.style.display = "block";
    terminalActive = true;

    function spam() {
        if (!terminalActive) return;
        term.innerText += "> PROCESS " + Math.floor(Math.random() * 999999) + " OVERRIDDEN\n";
        term.scrollTop = term.scrollHeight;
        setTimeout(spam, 40);
    }
    spam();
}

/* -----------------------------------------
   GLITCH OVERLAY
------------------------------------------ */
function toggleGlitch() {
    const glitch = document.getElementById("glitchOverlay");
    glitch.style.display = glitch.style.display === "none" ? "block" : "none";
}

/* -----------------------------------------
   SCI‑FI PARASITE
------------------------------------------ */
function spawnParasite() {
    const p = document.getElementById("parasite");
    p.style.opacity = 1;
    p.style.transform = `scale(${Math.random()*2+1}) rotate(${Math.random()*30}deg)`;
    setTimeout(() => p.style.opacity = 0, 2000);
}

/* -----------------------------------------
   SCREEN SHAKE
------------------------------------------ */
function screenShake() {
    document.body.style.animation = "shake 0.1s infinite";
    setTimeout(() => document.body.style.animation = "", 1500);
}

/* -----------------------------------------
   BLUE FLASH
------------------------------------------ */
function bsod() {
    const b = document.getElementById("bsodFlash");
    b.style.display = "block";
    setTimeout(() => b.style.display = "none", 700);
}

/* -----------------------------------------
   FINAL COLLAPSE
------------------------------------------ */
function finalCollapse() {
    // Turn everything on at once
    startMatrix();
    toggleGlitch();
    startTerminal();
    spawnParasite();
    screenShake();
    bsod();

    // Fade to black
    setTimeout(() => {
        document.body.style.transition = "2s";
        document.body.style.background = "black";
        document.body.innerHTML = "<h1 style='color:#ff0000;text-align:center;margin-top:20%;font-size:50px;'>SYSTEM COLLAPSED</h1>";
    }, 3000);
}

</script>
</body>
</html>
